<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emergency Tickets - Disaster Response AI</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <i class="fas fa-shield-alt"></i>
                <span>DisasterAI</span>
            </div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="index.html" class="nav-link">Home</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">Notifications</a>
                </li>
                <li class="nav-item">
                    <a href="login.html" class="nav-link">Log In</a>
                </li>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="dashboard-section">
        <div class="dashboard-container">
            <!-- Header -->
            <div class="dashboard-header">
                <h1 class="dashboard-title">Emergency Tickets</h1>
                <p class="dashboard-subtitle">
                    Prioritized based on keywords, quantity, and urgency cues
                </p>
            </div>

            <!-- Filters -->
            <div class="filters-container">
                <button class="filter-btn active" onclick="filterTickets('all')">
                    All
                </button>
                <button class="filter-btn" onclick="filterTickets('critical')">
                    <span class="badge badge-critical"></span> Critical
                </button>
                <button class="filter-btn" onclick="filterTickets('high')">
                    <span class="badge badge-high"></span> High
                </button>
                <button class="filter-btn" onclick="filterTickets('medium')">
                    <span class="badge badge-medium"></span> Medium
                </button>
            </div>

            <!-- SMS Messages Container -->
            <div class="sms-container" id="sms-container">
                <!-- SMS messages will be inserted here by JavaScript -->
            </div>
        </div>
    </main>

    <script src="script.js"></script>
    <script>
        // Initialize tickets on page load
        document.addEventListener('DOMContentLoaded', function() {
            renderTickets('all');
        });

        // Sample ticket data
        const ticketsData = [
            {
                id: 1,
                smsText: 'URGENT: 25 injured from building collapse in Kodambakkam. Need medical assistance immediately!',
                timestamp: '2026-02-07 14:32',
                senderPhone: '+91-9876-543210',
                senderName: 'Rajesh Sharma',
                need: 'Medical',
                quantity: 25,
                location: 'Kodambakkam, Chennai',
                urgency: 'critical',
                urgencyScore: 95,
                latitude: 13.0011,
                longitude: 80.2038,
                triageLevel: 'critical'
            },
            {
                id: 2,
                smsText: '150 people stranded after flooding in Tambaram. Need food supplies and shelter assistance urgently.',
                timestamp: '2026-02-07 14:28',
                senderPhone: '+91-8765-432109',
                senderName: 'Priya Desai',
                need: 'Food',
                quantity: 150,
                location: 'Tambaram, Chennai',
                urgency: 'high',
                urgencyScore: 85,
                latitude: 12.9226,
                longitude: 80.1269,
                triageLevel: 'high'
            },
            {
                id: 3,
                smsText: 'CRITICAL: 8 hikers trapped in Nilgiris forest fire. Helicopter rescue needed NOW. Lives in danger!',
                timestamp: '2026-02-07 14:15',
                senderPhone: '+91-9123-456789',
                senderName: 'Captain Vikram Singh',
                need: 'Rescue',
                quantity: 8,
                location: 'Nilgiris District, Ooty',
                urgency: 'critical',
                urgencyScore: 98,
                latitude: 11.4102,
                longitude: 76.7132,
                triageLevel: 'critical'
            },
            {
                id: 4,
                smsText: 'Landslide isolated village in Coonoor. 80 people without food. Need emergency supplies delivery.',
                timestamp: '2026-02-07 14:05',
                senderPhone: '+91-7654-321098',
                senderName: 'Ankit Patel',
                need: 'Food',
                quantity: 80,
                location: 'Coonoor, Nilgiris',
                urgency: 'high',
                urgencyScore: 78,
                latitude: 11.3515,
                longitude: 76.8017,
                triageLevel: 'high'
            },
            {
                id: 5,
                smsText: 'Heavy rainfall damage in Mylapore. 12 minor injuries. Need first aid supplies and medical assistance.',
                timestamp: '2026-02-07 13:45',
                senderPhone: '+91-9234-567890',
                senderName: 'Dr. Neha Gupta',
                need: 'Medical',
                quantity: 12,
                location: 'Mylapore, Chennai',
                urgency: 'medium',
                urgencyScore: 55,
                latitude: 13.0369,
                longitude: 80.2700,
                triageLevel: 'medium'
            },
            {
                id: 6,
                smsText: 'URGENT: 3 people stranded in flooded Adyar river. Rescue boats needed urgently.',
                timestamp: '2026-02-07 13:32',
                senderPhone: '+91-8901-234567',
                senderName: 'Arun Kumar',
                need: 'Rescue',
                quantity: 3,
                location: 'Adyar, Chennai',
                urgency: 'high',
                urgencyScore: 88,
                latitude: 13.0012,
                longitude: 80.2506,
                triageLevel: 'high'
            },
            {
                id: 7,
                smsText: 'Community center in T. Nagar sheltering 200 people after floods. Need meal supplies and assistance.',
                timestamp: '2026-02-07 13:20',
                senderPhone: '+91-9345-678901',
                senderName: 'Divya Reddy',
                need: 'Food',
                quantity: 200,
                location: 'T. Nagar, Chennai',
                urgency: 'medium',
                urgencyScore: 62,
                latitude: 13.0369,
                longitude: 80.2353,
                triageLevel: 'medium'
            },
            {
                id: 8,
                smsText: 'School in Mettupalayam hit by storm. 5 minor injuries treated. First aid supplies need backup.',
                timestamp: '2026-02-07 12:50',
                senderPhone: '+91-7890-123456',
                senderName: 'Suraj Malhotra',
                need: 'Medical',
                quantity: 5,
                location: 'Mettupalayam, Nilgiris',
                urgency: 'medium',
                urgencyScore: 45,
                latitude: 11.3082,
                longitude: 76.5584,
                triageLevel: 'medium'
            }
        ];

        function getUrgencyIcon(urgency) {
            const icons = {
                'critical': '<i class="fas fa-exclamation-circle"></i>',
                'high': '<i class="fas fa-exclamation-triangle"></i>',
                'medium': '<i class="fas fa-info-circle"></i>'
            };
            return icons[urgency] || '';
        }

        function getNeedIcon(need) {
            const icons = {
                'Medical': '<i class="fas fa-hospital-user"></i>',
                'Food': '<i class="fas fa-utensils"></i>',
                'Rescue': '<i class="fas fa-helicopter"></i>'
            };
            return icons[need] || '<i class="fas fa-box"></i>';
        }

        function renderTickets(filter) {
            const container = document.getElementById('sms-container');
            const filteredTickets = filter === 'all' 
                ? ticketsData 
                : ticketsData.filter(ticket => ticket.urgency === filter);

            container.innerHTML = filteredTickets.map(ticket => `
                <article class="sms-message urgency-${ticket.urgency}" onclick="viewTicketReport(${ticket.id})">
                    <div class="sms-header">
                        <div class="sms-sender">
                            <div class="sms-avatar">
                                ${ticket.senderName.charAt(0)}
                            </div>
                            <div class="sms-sender-info">
                                <div class="sms-name">${ticket.senderName}</div>
                                <div class="sms-phone">${ticket.senderPhone}</div>
                            </div>
                        </div>
                        <span class="sms-timestamp">${ticket.timestamp}</span>
                    </div>
                    
                    <div class="sms-content">
                        <p class="sms-text">${ticket.smsText}</p>
                    </div>
                    
                    <div class="sms-footer">
                        <div class="sms-badges">
                            <span class="sms-badge urgency-badge-${ticket.urgency}">
                                ${ticket.urgency.toUpperCase()}
                            </span>
                            <span class="sms-badge badge-need">
                                <i class="fas fa-${ticket.need === 'Medical' ? 'hospital-user' : ticket.need === 'Food' ? 'utensils' : 'helicopter'}"></i>
                                ${ticket.need}
                            </span>
                        </div>
                        <button class="view-report-btn">
                            View Report <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </article>
            `).join('');
        }

        function filterTickets(urgency) {
            // Update active button
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            // Render filtered tickets
            renderTickets(urgency);
        }

        function viewTicketReport(ticketId) {
            window.location.href = `report.html?id=${ticketId}`;
        }
    </script>
</body>
</html>
